(this.webpackJsonpvk=this.webpackJsonpvk||[]).push([[0],{154:function(e,t,s){},156:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),c=s(18),r=s.n(c),i=s(3),d=s.n(i),l=s(13),o=s.n(l),u=s(19),h=s(15),j=s(14),b=s(11),x=s(27),m=s(24),p=s(25),O=s(4),f=s(28),v=s(26),y=(s(154),s(0)),g=function(e){Object(f.a)(s,e);var t=Object(v.a)(s);function s(e){var a;return Object(m.a)(this,s),(a=t.call(this,e)).amountHandler=function(e){a.setState({amount_of_questions:e.target.value})},a.categoryHandler=function(e){a.setState({category:e.target.value})},a.handlerNext=a.handlerNext.bind(Object(O.a)(a)),a.handlerAnswers=a.handlerAnswers.bind(Object(O.a)(a)),a.handlerChange=a.handlerChange.bind(Object(O.a)(a)),a.handlerTruth=a.handlerTruth.bind(Object(O.a)(a)),a.fetchHandler=a.fetchHandler.bind(Object(O.a)(a)),a.amountHandler=a.amountHandler.bind(Object(O.a)(a)),a.categoryHandler=a.categoryHandler.bind(Object(O.a)(a)),a.state={isFetching:!0,error:null,index:0,data:[],question_data:[],answers:"",answers_result:[],result:[],easy:[],medium:[],hard:[],easyAnswerContainer:[],mediumAnswerContainer:[],hardAnswerContainer:[],menu:!0,modal_id:1,amount_of_questions:"10",category:"",count_result:!1},a}return Object(p.a)(s,[{key:"fetchHandler",value:function(){var e=this;fetch("https://opentdb.com/api.php?amount=".concat(this.state.amount_of_questions).concat(this.state.category,"&type=multiple&encode=base64")).then((function(e){return e.json()})).then((function(t){console.log(t.results),t.results.forEach((function(e){e.difficulty=atob(e.difficulty),e.category=atob(e.category),e.question=atob(e.question),e.correct_answer=atob(e.correct_answer),e.incorrect_answers=e.incorrect_answers.map((function(e){return atob(e)}))})),e.setState({data:t.results,isFetching:!1,question_data:t.results[0]}),e.handlerAnswers()})).catch((function(t){console.log(t),e.setState({isFetching:!1,error:t})})),this.setState({menu:!1}),console.log(this.state.category+" \u041a\u043e\u043b-\u0432\u043e \u0432\u043e\u043f\u0440\u043e\u0441\u043e\u0432: "+this.state.amount_of_questions)}},{key:"handlerAnswers",value:function(){var e=this,t=[];t.push.apply(t,[this.state.data[this.state.index].correct_answer].concat(Object(x.a)(this.state.data[this.state.index].incorrect_answers)));var s=t.sort((function(){return Math.random()-.5})).map((function(t){return Object(y.jsx)("div",{className:"col-6 d-flex justify-content-center d-flex align-items-center",children:Object(y.jsx)("button",{className:"btn answer my-2 ",onClick:e.handlerChange,children:t},t)})}));this.setState({answers:s,index:this.state.index+1,buttonNext:Object(y.jsx)("div",{className:"text next d-flex justify-content-center d-flex align-items-center p-2",onClick:function(){d.a.send("VKWebAppTapticImpactOccurred",{style:"heavy"}),e.handlerNext()},children:Object(y.jsx)("div",{children:"Next"})},this.state.index)}),this.state.index===this.state.data.length-1&&this.setState({buttonNext:Object(y.jsx)("div",{className:"text next d-flex justify-content-center d-flex align-items-center p-2 ",onClick:function(){d.a.send("VKWebAppTapticImpactOccurred",{style:"heavy"}),e.handlerTruth(),e.setState({count_result:!0})},children:Object(y.jsx)("div",{children:"End"})})})}},{key:"handlerChange",value:function(e){this.setState(Object(b.a)({},this.state.answers_result,this.state.answers_result+this.state.answers_result.push(e.target.textContent))),console.log(this.state.answers_result)}},{key:"handlerNext",value:function(){this.handlerAnswers(),this.state.answers_result[this.state.answers_result.length-1]===this.state.data[this.state.index-1].correct_answer?this.setState(Object(b.a)({},this.state.result,this.state.result+this.state.result.push("\u0412\u0435\u0440\u043d\u043e"))):this.setState(Object(b.a)({},this.state.result,this.state.result+this.state.result.push("\u041d\u0435\u0432\u0435\u0440\u043d\u043e"))),this.setState({question_data:this.state.data[this.state.index]})}},{key:"handlerTruth",value:function(){for(var e=this,t=[],s="\u0412\u0435\u0440\u043d\u043e",a=this.state.result.indexOf(s);-1!==a;)t.push(a+1),a=this.state.result.indexOf(s,a+1);var n=[];this.state.data.forEach((function(e){n.push(e.difficulty)}));for(var c=[],r="easy",i=n.indexOf(r);-1!==i;)c.push(i+1),i=n.indexOf(r,i+1);for(var d=c.map((function(t){return Object(y.jsx)("p",{className:"question",style:{textAlign:"center",borderRadius:"5px 0 0 5px"},"data-bs-toggle":"modal","data-bs-target":"#exampleModal",onClick:function(){return e.setState({modal_id:t})},children:t},t)})),l=c.map((function(e){return t.includes(e)?Object(y.jsx)("p",{style:{background:"#2e7d32",textAlign:"center",borderRadius:"0 5px 5px 0"},children:"True"},e):Object(y.jsx)("p",{style:{background:"#5E2129",textAlign:"center",borderRadius:"0 5px 5px 0"},children:"False"},e)})),o=[],u="medium",h=n.indexOf(u);-1!==h;)o.push(h+1),h=n.indexOf(u,h+1);for(var j=o.map((function(t){return Object(y.jsx)("p",{className:"question",style:{textAlign:"center",borderRadius:"5px 0 0 5px"},"data-bs-toggle":"modal","data-bs-target":"#exampleModal",onClick:function(){return e.setState({modal_id:t})},children:t},t)})),b=o.map((function(e){return t.includes(e)?Object(y.jsx)("p",{style:{background:"#2e7d32",textAlign:"center",borderRadius:"0 5px 5px 0"},children:"True"},e):Object(y.jsx)("p",{style:{background:"#5E2129",textAlign:"center",borderRadius:"0 5px 5px 0"},children:"False"},e)})),x=[],m="hard",p=n.indexOf(m);-1!==p;)x.push(p+1),p=n.indexOf(m,p+1);var O=x.map((function(t){return Object(y.jsx)("p",{className:"question",style:{textAlign:"center",borderRadius:"5px 0 0 5px"},"data-bs-toggle":"modal","data-bs-target":"#exampleModal",onClick:function(){return e.setState({modal_id:t})},children:t},t)})),f=x.map((function(e){return t.includes(e)?Object(y.jsx)("p",{style:{background:"#2e7d32",textAlign:"center",borderRadius:"0 5px 5px 0"},children:"True"},e):Object(y.jsx)("p",{style:{background:"#5E2129",textAlign:"center",borderRadius:"0 5px 5px 0"},children:"False"},e)}));this.setState({easy:d,medium:j,hard:O,easyAnswerContainer:l,mediumAnswerContainer:b,hardAnswerContainer:f})}},{key:"render",value:function(){var e=this;return!0===this.state.menu?Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)("div",{className:"decoration1 rounded"},this.state.index),Object(y.jsx)("div",{className:"decoration2 rounded"}),Object(y.jsx)("div",{className:"decoration3 rounded"}),Object(y.jsx)("div",{className:"decoration8 rounded"}),Object(y.jsx)("div",{className:"decoration9 rounded"}),Object(y.jsxs)("header",{className:"App-header",children:[Object(y.jsx)("div",{className:"text title container my-5 shadow p  rounded",children:Object(y.jsx)("div",{className:"text d-flex justify-content-center p-3",children:"Mini-Trivia"})}),Object(y.jsx)("div",{className:"container mb-5 pb-3",children:Object(y.jsxs)("div",{className:"row",children:[Object(y.jsxs)("div",{className:"col-6 ",children:[Object(y.jsx)("label",{className:"text d-flex justify-content-center mb-2",children:"Category"}),Object(y.jsxs)("select",{className:"form-select btn-secondary shadow p p-3 rounded ",onChange:this.categoryHandler,"aria-label":"Default select example",children:[Object(y.jsx)("option",{value:"",children:"Any Category"}),Object(y.jsx)("option",{value:"&category=9",children:"General Knowledge"}),Object(y.jsx)("option",{value:"&category=27",children:"Animals"}),Object(y.jsx)("option",{value:"&category=23",children:"History"}),Object(y.jsx)("option",{value:"&category=30",children:"Science: Gadgets"}),Object(y.jsx)("option",{value:"&category=22",children:"Geography"}),Object(y.jsx)("option",{value:"&category=11",children:"Films"}),Object(y.jsx)("option",{value:"&category=12",children:"Music"}),Object(y.jsx)("option",{value:"&category=15",children:"Video Games"})]})]}),Object(y.jsxs)("div",{className:"col-6",children:[Object(y.jsx)("label",{className:"text d-flex justify-content-center mb-2",children:"Questions"}),Object(y.jsxs)("select",{className:"form-select btn-secondary shadow p p-3 rounded ",onChange:this.amountHandler,"aria-label":"Default select example",children:[Object(y.jsx)("option",{defaultValue:"10",children:"10"}),Object(y.jsx)("option",{value:"20",children:"20"}),Object(y.jsx)("option",{value:"30",children:"30"})]})]})]})}),Object(y.jsx)("div",{className:"container",children:Object(y.jsx)("div",{className:"row justify-content-center",children:Object(y.jsx)("div",{className:"text start d-flex justify-content-center d-flex align-items-center p-2",onClick:function(){d.a.send("VKWebAppTapticImpactOccurred",{style:"heavy"}),e.fetchHandler()},children:Object(y.jsx)("div",{children:"Start"})})})})]})]}):this.state.isFetching?Object(y.jsx)("div",{className:"App",children:Object(y.jsx)("header",{className:"text App-header",children:"...Loading"})}):this.state.error?Object(y.jsx)("div",{children:"\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(this.state.error.message)}):!0===this.state.count_result?Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{className:"modal fade",role:"dialog",id:"exampleModal",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(y.jsx)("div",{className:"modal-dialog modal-dialog-centered",style:{paddingLeft:"20px",paddingRight:"20px"},role:"document",children:Object(y.jsx)("div",{className:"modal-content",children:Object(y.jsxs)("div",{className:"modal-body",children:[Object(y.jsx)("p",{children:this.state.data[this.state.modal_id-1].category}),Object(y.jsx)("p",{children:this.state.data[this.state.modal_id-1].question}),Object(y.jsxs)("p",{children:["Correct answer: ",this.state.data[this.state.modal_id-1].correct_answer]})]})})})}),Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)("div",{className:"decoration10 rounded"}),Object(y.jsx)("div",{className:"decoration11 rounded"}),Object(y.jsx)("header",{className:"App-header",children:Object(y.jsxs)("div",{className:"wrapper container ",children:[Object(y.jsx)("div",{className:"row p-2 result",children:Object(y.jsx)("h1",{className:"text pt-5",children:"Results"})}),Object(y.jsxs)("div",{className:"row shadow p p-2 rounded my-3 mx-2",style:{background:"#263238"},children:[Object(y.jsx)("strong",{className:"mb-2",children:"Easy"}),Object(y.jsx)("div",{className:"col-6",children:this.state.easy}),Object(y.jsx)("div",{className:"col-6",children:this.state.easyAnswerContainer})]}),Object(y.jsxs)("div",{className:"row shadow p p-2 rounded my-3 mx-2",style:{background:"#263238"},children:[Object(y.jsx)("strong",{className:"mb-2",children:"Medium"}),Object(y.jsx)("div",{className:"col-6",children:this.state.medium}),Object(y.jsx)("div",{className:"col-6",children:this.state.mediumAnswerContainer})]}),Object(y.jsxs)("div",{className:"row shadow p p-2 rounded my-3 mx-2",style:{background:"#263238"},children:[Object(y.jsx)("strong",{className:"mb-2",children:"Hard"}),Object(y.jsx)("div",{className:"col-6",children:this.state.hard}),Object(y.jsx)("div",{className:"col-6",children:this.state.hardAnswerContainer})]}),Object(y.jsx)("div",{className:"row justify-content-center",style:{margin:"5vh"},children:Object(y.jsx)("div",{className:"text start d-flex justify-content-center d-flex align-items-center",onClick:function(){d.a.send("VKWebAppTapticImpactOccurred",{style:"heavy"}),e.setState({menu:!0,category:"",amount_of_questions:10,index:0,count_result:!1,buttonNext:Object(y.jsx)("div",{className:"text next d-flex justify-content-center d-flex align-items-center p-2",onClick:function(){d.a.send("VKWebAppTapticImpactOccurred",{style:"heavy"}),e.handlerNext()},children:Object(y.jsx)("div",{children:"Next"})}),isFetching:!0,answers_result:[],result:[],easy:[],medium:[],hard:[],easyAnswerContainer:[],mediumAnswerContainer:[],hardAnswerContainer:[]})},children:Object(y.jsx)("div",{children:"Menu"})})})]})})]})]}):Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)("div",{className:"decoration4 rounded"}),Object(y.jsx)("div",{className:"decoration5 rounded"}),Object(y.jsx)("div",{className:"decoration6 rounded"}),Object(y.jsx)("div",{className:"decoration7 rounded"}),Object(y.jsxs)("header",{className:"App-header p-3",children:[Object(y.jsxs)("div",{className:"container",children:[Object(y.jsxs)("div",{className:"row mb-3 shadow p p-3 rounded mb-3",style:{background:"#263238"},children:[Object(y.jsxs)("div",{className:"col-6 wrapper_question",children:[Object(y.jsx)("strong",{children:"Category: "}),Object(y.jsx)("br",{}),this.state.question_data.category]}),Object(y.jsxs)("div",{className:"col-6 wrapper_question",children:[Object(y.jsx)("strong",{children:"Difficulty: "}),Object(y.jsx)("br",{}),this.state.question_data.difficulty]})]}),Object(y.jsx)("div",{className:"row mb-3 shadow p p-3 rounded mb-3",style:{background:"#263238"},children:Object(y.jsx)("div",{className:"col-12 wrapper_question",children:this.state.question_data.question})})]}),Object(y.jsxs)("div",{className:"container ",children:[Object(y.jsx)("div",{className:"row shadow p p-3 rounded",style:{background:"#263238"},children:this.state.answers}),Object(y.jsx)("div",{className:"row justify-content-center",style:{marginTop:"5vh"},children:this.state.buttonNext})]})]})]})}}]),s}(n.a.Component),N=function(){var e=Object(a.useState)("home"),t=Object(h.a)(e,2),s=(t[0],t[1],Object(a.useState)(null)),n=Object(h.a)(s,2),c=(n[0],n[1]);Object(a.useEffect)((function(){function e(){return(e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}d.a.subscribe((function(e){var t=e.detail,s=t.type,a=t.data;if("VKWebAppUpdateConfig"===s){var n=document.createAttribute("scheme");n.value=a.scheme?a.scheme:"client_light",document.body.attributes.setNamedItem(n)}})),function(){e.apply(this,arguments)}()}),[]);return Object(y.jsx)(j.a,{children:Object(y.jsx)(j.b,{children:Object(y.jsx)(g,{})})})};d.a.send("VKWebAppInit"),r.a.render(Object(y.jsx)(N,{}),document.getElementById("root"))}},[[156,1,2]]]);
//# sourceMappingURL=main.92dc32e6.chunk.js.map